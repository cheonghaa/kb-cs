### 로드밸런서가 무엇인가요?
  
#### 역할   
  시스템의 가용성을 높임
   - 부하 분산    
    여러 대의 서버가 있다고 가정했을 때, 특정 서버에 트래픽이 집중되지 않도록 네트워크 트래픽을 분산
   - 장애 복구  
    서버의 상태를 모니터링하고, 특정 서버에 장애가 발생하면 해당 서버로의 트래픽을 다른 정상적인 서버로 자동으로 분산
  
#### L4 로드밸런서와, L7 로드밸런서의 차이에 대해 설명해 주세요.
- L4 로드밸런서   
  전송 계층에 있는 정보(IP, MAC, PORT 등)를 토대로 로드를 분산
- L7 로드밸런서   
  어플리케이션 계층의 정보(HTTP 헤더, URI 등)를 토대로 로드를 분산  

  > 참고
  - 리버스 프록시  
    1. 보안  
      서버의 실제 ip 주소를 클라이언트에게 노출 시키지 않을 수 있음   
    2. SSL Termination  
      SSL 종료를 통해 리버스 프록시가 암호화된 트래픽을 처리하고, 보안 및 인증 관련 작업을 단일 지점에서 관리
    3. 애플리케이션 방화벽
      리버스 프록시는 클라이언트의 요청을 백엔드 서버로 전달하기 전에 보안 검사(예: SQL 인젝션, XSS 공격 등)를 수행
    4. 캐싱
      자주 요청되는 컨텐츠(예: 이미지, HTML 페이지 등)를 캐싱하여 클라이언트의 요청에 더 빠르게 응답할 수 있습니다. 이를 통해 백엔드 서버의 부하를 줄이고, 응답 시간을 단축

- 실제 서비스 비교(로드 밸런서 vs 리버스 프록시)
  ###### AWS Applcation Load Balancer
  ![AWS](https://d1.awsstatic.com/Digital%20Marketing/House/1up/products/elb/Product-Page-Diagram_Elastic-Load-Balancing_ALB_HIW%402x.cb3ce6cfd5dd549c99645ed51eef9e8be8a27aa3.png)

  ##### Nginx(web server, reverse proxy server)
  ![Nginx](https://miro.medium.com/v2/resize:fit:1276/0*m_Rey9rU_HIi674J.jpg)

  ##### Traefik(reverse proxy server)
  ![Traefik](https://doc.traefik.io/traefik/assets/img/traefik-architecture.png)

  개념적으로 다르지만 실제는 서로의 기능을 대부분 공유하는 것을 알 수 있다.
  - 기본적인 로드 밸런서 기능(라우터)
  - Layer 7 Firewall 
  - SSL Termination
  - SSL Auto configure
  
#### 로드밸런서 알고리즘에 대해 설명해 주세요.
- 정적 로드 밸런싱  
  고정된 규칙을 따르며 현재 서버 상태와 무관
  1. 라운드 로빈   
  클라이언트의 요청을 여러 대의 서버에 순차적으로 분배

    1. 가중 기반 라운드 로빈
  우선순위 또는 용량에 따라 각 서버에 서로 다른 가중치를 할당, 가중치가 높은 서버에 트래픽을 더 많이 분배

    1. IP 해시   
    IP 주소에 대해 해싱 수행, 클라이언트 IP 주소를 서버에 매핑

- 동적 로드 밸런싱   
  트래픽을 분배하기 전에 서버의 상태를 검사

  1. 최소 연결 방법  
   활성 연결이 가장 적은 서버를 확인하고 해당 서버로 트래픽을 전송

  2. 가중치 기반 최소 연결 방법   
   각 서버에 다른 가중치 또는 용량을 할당, 용량별 연결이 가장 적은 서버로 새 클라이언트 요청을 전송

  3. 최소 응답 시간 방법   
  응답 시간 : 응답 시간 - 요청 시간  
    이 중 응답 시간이 가장 낮은 서버를 선택
  1. 리소스 기반 방법  
  로드 밸런서는 현재 서버 부하를 분석하여 트래픽을 배포   
  에이전트 : 서버에서 실행되며 컴퓨팅 용량 및 메모리와 같은 서버 리소스의 사용량을 계산   
  트래픽을 배포하기 전, 에이전트를 확인하여 충분한 여유 리소스가 있는지 확인
  
#### 로드밸런싱 대상이 되는 장치중 일부 장치가 문제가 생겨 접속이 불가능하다고 가정해 봅시다. 이 경우, 로드밸런서가 해당 장비로 요청을 보내지 않도록 하려면 어떻게 해야 할까요?
- Health Check   
  로드밸런서는 서버로 /health와 같은 요청을 주기적으로 보내 서버의 상태를 확인  
  서버의 응답이 500인 경우 문제가 발생했다고 판단하여 로드밸런싱에서 제외      
- Failover   
  서버에 문제가 발생하면 자동으로 대체 시스템 또는 서비스로 연결하는 기술
#### 로드밸런서 장치를 사용하지 않고, DNS를 활용해서 유사하게 로드밸런싱을 하는 방법에 대해 설명해 주세요.
- 라운드 로빈 DNS
  1. zone 파일의 A NAME 레코드를 사용하여 하나의 도메인 이름과 여러 공인 IP를 매핑
  2. 클라이언트는 DNS가 제공한 여러 공인 IP 중 하나를 선택
  - 사용 예시   
    실시간으로 헬스 체크가 불가능할 때 사용(서버들이 지리적으로 멀리 떨어져있는 경우)
  - 단점  
    낮은 가용성 : 헬스체크를 통해 서비스가 죽었는지 확인 불가능
- GeoDNS
   사용자의 지리적 위치를 기반으로 가장 가까운 서버의 IP를 제공
   - 설정 방법   
      1. GeoDNS 서비스 제공업체를 사용
      2. 직접 구현
         - DNS 서버 설치   
            오픈 소스 DNS 서버 시스템 설치(BIND)
         - 지리적 IP 데이터베이스 사용   
            GeoIP 데이터베이스 설치
         - 도메인 zone 파일 설정
    