### 로드밸런서가 무엇인가요?
  
- 역할   
   여러 대의 서버가 있다고 가정했을 때, 특정 서버에 트래픽이 집중되지 않도록 서버의 부하를 분산
  
#### L4 로드밸런서와, L7 로드밸런서의 차이에 대해 설명해 주세요.
- L4 로드밸런서
  전송 계층에 있는 정보(IP, MAC, PORT 등)를 토대로 로드를 분산
- L7 로드밸런서
  어플리케이션 계층의 정보(HTTP 헤더, URI 등)를 토대로 로드를 분산
  SSL을 사용한다면 로드 밸런서에서 복호화 -> 로드밸런싱 -> 암호화하는 과정을 처리하고, 최종 목적지에서 다시 복호화하는 비용이 발생할 수 있음
   
#### 로드밸런서 알고리즘에 대해 설명해 주세요.
- 정적 로드 밸런싱  
  고정된 규칙을 따르며 현재 서버 상태와 무관
  1. 라운드 로빈   
클라이언트의 요청을 여러 대의 서버에 순차적으로 분배하는 방식

    1. 가중 기반 라운드 로빈
우선순위 또는 용량에 따라 각 서버에 서로 다른 가중치를 할당할 수 있습니다. 가중치가 높은 서버에 트래픽을 더 많이 분배

    1. IP 해시   
    IP 주소에 대해 해싱 수행, 클라이언트 IP 주소를 서버에 매핑

- 동적 로드 밸런싱   
  트래픽을 분배하기 전에 서버의 상태를 검사

  1. 최소 연결 방법
   연결은 클라이언트와 서버 간의 개방형 통신 채널입니다. 클라이언트는 서버에 첫 번째 요청을 전송할 때 서로 활성 연결을 인증하고 설정합니다. 최소 연결 방법에서 로드 밸런서는 활성 연결이 가장 적은 서버를 확인하고 해당 서버로 트래픽을 전송합니다. 이 방법에서는 모든 연결에 모든 서버에 대해 동일한 처리 능력이 필요하다고 가정합니다.

  2. 가중치 기반 최소 연결 방법
  가중치 기반 최소 연결 알고리즘은 일부 서버가 다른 서버보다 더 많은 활성 연결을 처리할 수 있다고 가정합니다. 따라서 각 서버에 다른 가중치 또는 용량을 할당할 수 있으며 로드 밸런서는 용량별 연결이 가장 적은 서버로 새 클라이언트 요청을 전송합니다.

  1. 최소 응답 시간 방법   
  응답 시간 : 응답 시간 - 요청 시간  
    이 중 응답 시간이 가장 낮은 서버를 선택
  1. 리소스 기반 방법  
  로드 밸런서는 현재 서버 부하를 분석하여 트래픽을 배포   
  에이전트 : 서버에서 실행되며 컴퓨팅 용량 및 메모리와 같은 서버 리소스의 사용량을 계산   
  트래픽을 배포하기 전, 에이전트를 확인하여 충분한 여유 리소스가 있는지 확인
  
#### 로드밸런싱 대상이 되는 장치중 일부 장치가 문제가 생겨 접속이 불가능하다고 가정해 봅시다. 이 경우, 로드밸런서가 해당 장비로 요청을 보내지 않도록 하려면 어떻게 해야 할까요?
- Health Check   
  로드밸런서는 서버로 /health와 같은 요청을 주기적으로 보내 서버의 상태를 확인합니다.   
  서버의 응답이 500인 경우 문제가 발생했다고 판단하여 로드밸런싱에서 제외시킵니다.   
- Failover   
  서버에 문제가 발생하면 자동으로 대체 시스템 또는 서비스로 연결하는 기술
#### 로드밸런서 장치를 사용하지 않고, DNS를 활용해서 유사하게 로드밸런싱을 하는 방법에 대해 설명해 주세요.
- 라운드 로빈 DNS
  1. zone 파일의 A NAME 레코드를 사용하여 하나의 도메인 이름과 여러 공인 IP를 매핑
  2. 클라이언트는 DNS가 제공한 여러 공인 IP 중 하나를 선택
  - 사용 예시   
    실시간으로 헬스 체크가 불가능할 때 사용(서버들이 지리적으로 멀리 떨어져있는 경우)
  - 단점  
    낮은 가용성 : 헬스체크를 통해 서비스가 죽었는지 확인 불가능
- GeoDNS
   사용자의 지리적 위치를 기반으로 가장 가까운 서버의 IP를 제공
   - 설정 방법   
      1. GeoDNS 서비스 제공업체를 사용
      2. 직접 구현
         - DNS 서버 설치   
            오픈 소스 DNS 서버 시스템 설치(BIND)
         - 지리적 IP 데이터베이스 사용   
            GeoIP 데이터베이스 설치
         - 도메인 zone 파일 설정
    